<div class="container-fluid pt-2">
    <div class="row d-flex justify-content-center">
        <h2 class="">Update Vehicle Details</h2>
        &nbsp; &nbsp; &nbsp; &nbsp;
        <button (click)="logout()" class="btn btn-danger">Logout</button>
    </div>
    <div class="row pt-4">
        <div class="col-md-5 offset-md-1">
            <div class="card mb-4">
                <div class="card-header bg-dark text-light">
                    Add Vehicle
                </div>
                <div class="card-body">
                    <form [formGroup]="addVehicleForm" (ngSubmit)="addVehicle()">
                        <div class="form-group">
                            <label for="vehicleType">Vehicle Name:</label>
                            <input type="text" class="form-control" formControlName="vehicleType">
                            <span *ngIf="addVehicleForm.controls.vehicleType.invalid && addVehicleForm.controls.vehicleType.dirty" class="text-danger">
                                Enter a valid format of vehicle type.
                            </span>
                        </div>
                        
                        <div class="form-group">
                                <label for="count">Vehicle Count:</label>
                                <input type="number" class="form-control" formControlName="count">
                                <span *ngIf="addVehicleForm.controls.count.invalid && addVehicleForm.controls.count.dirty" class="text-danger">
                                    Enter a valid count.
                                </span>
                        </div>
                        <button type="submit" [disabled]="addVehicleForm.invalid" class="btn btn-dark">Add Vehicle</button>
                    </form>
                    <div>
                        <span *ngIf="errorMessageAdding" class="text-danger">{{errorMessageAdding}}</span>
                    </div>
                    <div>
                        <span *ngIf="successMessageAdding" class="text-success">{{successMessageAdding}}</span>
                    </div>
                </div>
            </div>
            <div class="card mt-4 mb-4">
                <div class="card-header bg-dark text-light">
                    Update Vehicle
                </div>
                <div class="card-body">
                    <form [formGroup]="updateVehicleForm" (ngSubmit)="updateVehicle()">
                        <div class="form-group">
                            <label for="vehicleType">Vehicle Name:</label>
                            <input type="text" class="form-control" formControlName="vehicleType">
                            <span *ngIf="updateVehicleForm.controls.vehicleType.invalid && updateVehicleForm.controls.vehicleType.dirty" class="text-danger">
                                Enter a valid format of vehicle type.
                            </span>
                        </div>
                        
                        <div class="form-group">
                                <label for="count">Vehicle Count:</label>
                                <input type="number" class="form-control" formControlName="count">
                                <span *ngIf="updateVehicleForm.controls.count.invalid && updateVehicleForm.controls.count.dirty" class="text-danger">
                                    Enter a valid count.
                                </span>
                        </div>
                        <button type="submit" [disabled]="updateVehicleForm.invalid" class="btn btn-dark">Update Vehicle</button>
                    </form>
                    <div>
                        <span *ngIf="errorMessageUpdate" class="text-danger">{{errorMessageUpdate}}</span>
                    </div>
                    <div>
                        <span *ngIf="successMessageUpdate" class="text-success">{{successMessageUpdate}}</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 offset-md-1">
                <div class="card mt-4 mb-4">
                        <div class="card-header bg-dark text-light">
                            <!-- <h3>Add Vehicle</h3> -->
                            Delete Vehicle
                        </div>
                        <div class="card-body">
                            <form  [formGroup]="deleteVehicleForm" (ngSubmit)="deleteVehicle()">
                                <div class="form-group">
                                    <label for="vName">Vehicle Name :</label>
                                    <input type="text" class="form-control" formControlName="vName">
                                
                                <span *ngIf="deleteVehicleForm.controls.vName.invalid && deleteVehicleForm.controls.vName.dirty" class="text-danger">
                                        Enter a valid format of Vehicle Name.
                                </span>
                                </div>
                                <button type="submit" [disabled]="deleteVehicleForm.invalid" class="btn btn-dark">Delete Count</button>  
                            </form>
                            <div>
                                <span *ngIf="errorMessageDelete" class="text-danger">{{errorMessageDelete}}</span>
                            </div>
                            <div>
                                <span *ngIf="successMessageDelete" class="text-success">{{successMessageDelete}}</span>
                            </div>
                        </div>
                </div>

                <div class="card mt-4 mb-4">
                        <div class="card-header bg-dark text-light">
                            <!-- <h3>Add Vehicle</h3> -->
                            Get Availability Count
                        </div>
                        <div class="card-body">
                            <form  [formGroup]="getCountForm" (ngSubmit)="getCount()">
                                <div class="form-group">
                                    <label for="vName">Vehicle Name :</label>
                                    <input type="text" class="form-control" formControlName="vName">
                                
                                <span *ngIf="getCountForm.controls.vName.invalid && getCountForm.controls.vName.dirty" class="text-danger">
                                        Enter a valid format of Vehicle Name.
                                </span>
                                </div>
                                <button type="submit" [disabled]="getCountForm.invalid" class="btn btn-dark">Get Count</button>  
                            </form>
                            <div>
                                <span *ngIf="errorMessageCount" class="text-danger">{{errorMessageCount}}</span>
                            </div>
                            <div>
                                <span *ngIf="successMessageCount" class="text-success">{{successMessageCount}}</span>
                            </div>
                        </div>
                </div>
        </div>
    </div>
    
    <hr>

    <div class="container">
        <div class="row d-flex justify-content-center">
                <h2 class="">Get All Bookings Corresponding to User</h2>
        </div>
        <div class="row">
            <div class="col-md-4 offset-md-4">
                <form  [formGroup]="bookingsForm" (ngSubmit)="getBookings()">
                    <div class="form-group">
                        <label for="userName">Username :</label>
                        <input type="text" class="form-control" formControlName="userName">
                    </div>
                    <span *ngIf="bookingsForm.controls.userName.invalid && bookingsForm.controls.userName.dirty" class="text-danger">
                            Enter a valid format of username.
                    </span>
                    <button type="submit" [disabled]="bookingsForm.invalid" class="btn btn-dark">Get Bookings</button>  
                </form>
                <div>
                    <span *ngIf="errorMessageBookings" class="text-danger">{{errorMessageBookings}}</span>
                </div>
            </div>
        </div>
        <br>
        <div>
            <table class="table table-striped">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Booking ID</th>
                        <th scope="col">Vehicle</th>
                        <th scope="col">Count</th>
                        <th scope="col">Booking Date</th>
                        <th scope="col">Journey Date</th>
                        <th scope="col">Source</th>
                        <th scope="col">Destination</th>
                        <th scope="col">Duration</th>
                        <th scope="col">Distance</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let booking of bookings">
                        <td scope="row">{{booking.bid}}</td>
                        <td>{{booking.vehicleName}}</td>
                        <td>{{booking.vehicleCount}}</td>
                        <td>{{booking.dateOfRegistration}}</td>
                        <td>{{booking.bookingDate}}</td>
                        <td>{{booking.source}}</td>
                        <td>{{booking.destination}}</td>
                        <td>{{booking.duration}} days</td>
                        <td>{{booking.distance}} km</td>
                        <td>Rs {{booking.amount}}</td>
                        <td>{{booking.status}}</td>
                    </tr>
                </tbody>
                
            </table>
        </div> 
    </div>
    <br>
    <hr>
</div>
